# How to start:

1. Clone the repository
2. Start postgresql server and configure .env file (DB_USER, DB_PASSWORD, DB_HOST, DB_PORT, DB_NAME)
2. Run `pip install -r requirements.txt`
3. Run `alembic revision --autogenerate -m "Initial commit"`
4. Run `alembic upgrade head`
5. Run `python run.py`

# API Endpoints

| Endpoint                 | HTTP Method | Path                                        | Description                                             | Parameters                                                                                    | User Type |
|--------------------------|-------------|---------------------------------------------|---------------------------------------------------------|-----------------------------------------------------------------------------------------------|-----------|
| Product List             | POST        | `/product/filtered`                         | Get a list of all products with filters                 | category_id (optional), skip, limit, filter - dict[AttrID, list[ValueIDs]] (optional)         | ALL       |
| Create Product           | POST        | `/product/`                                 | Create a new product                                    | title, description, price, discount, quantity, category_id, attribute_values (optional)       | Admin     |
| Retrieve Product by ID   | GET         | `/product/{product_id}/`                    | Get details of a specific product by ID                 |                                                                                               | ALL       |
| Update Product by ID     | PUT         | `/product/{product_id}/`                    | Update details of a specific product by ID              | Same as product create                                                                        | Admin     |
| Delete Product by ID     | DELETE      | `/product/available_filters/{category_id}/` | Get available filters for products in selected category |                                                                                               | Admin     |
| Category List            | GET         | `/categories/`                              | Get a list of all categories                            |                                                                                               | ALL       |
| Create Category          | POST        | `/categories/`                              | Create a new category                                   | title, parent_id (optional)                                                                   | Admin     |
| Update Category by ID    | PUT         | `/categories/{id}/`                         | Update details of a specific category by ID             | Same as category create                                                                       | Admin     |
| Get My Orders            | GET         | `/order/my_orders/`                         | Get list of user orders                                 |                                                                                               | User      |
| Create Order             | POST        | `/order/create_order/`                      | Create order with items in cart                         | cart_id, status (optional), delivery_type, delivery_address (ID, optional), payment_method_id | User      |
| Cancel My Order          | POST        | `/order/cancel_order/`                      | Cancel user's order                                     | order_id                                                                                      | User      |
| Update Order Status      | POST        | `/order/update_status/`                     | Update order status                                     | order_id, status                                                                              | Admin     |
| Get My Cart              | GET         | `/cart/my_cart/`                            | Get details of user's cart                              |                                                                                               | User      |
| Add Product To Cart      | POST        | `/cart/add_to_cart/`                        | Add product to user's cart                              | product_id                                                                                    | User      |
| Remove Product From Cart | POST        | `/cart/remove_from_cart/`                   | Remove product from user's cart                         | product_id, full_remove (optional)                                                            | User      |
| User Register            | POST        | `/auth/register/`                           | Register a new user                                     |                                                                                               | User      |
| User Login               | POST        | `/auth/login/`                              | Authenticate and generate access tokens for a user      |                                                                                               | User      |
| User Logout              | POST        | `/auth/logout/`                             | Logout from account                                     |                                                                                               | User      |
| Get My Account Info      | GET         | `/users/me/`                                | Update details of a specific user by ID (admin-only)    |                                                                                               | User      |
| Edit My Account Info     | PATCH       | `/users/me/`                                | Delete a specific user by ID (admin-only)               |                                                                                               | User      |
| Get User By ID           | GET         | `/users/{user_id}`                          | Get information about the authenticated user            |                                                                                               | Admin     |
| Edit User By ID          | PATCH       | `/users/{user_id}`                          | Edit the information of the authenticated user          |                                                                                               | Admin     |
| Delete User By ID        | DELETE      | `/users/{user_id}`                          | Remove the account of the authenticated user            |                                                                                               | Admin     |
| Create Attribute         | POST        | `/attribute/`                               | Create a new attribute                                  | title, in_filter                                                                              | Admin     |
| Update Attribute by ID   | PUT         | `/attribute/{id}/`                          | Update details of a specific attribute by ID            | Same as attribute create                                                                      | Admin     |
| Delete Attribute by ID   | DELETE      | `/attribute/{id}/`                          | Remove the attribute by ID                              |                                                                                               | Admin     |
| Create Attribute Value   | POST        | `/attribute_value/`                         | Create a new attribute value                            | value, attribute_id                                                                           | Admin     |
| Update Attribute Value   | PUT         | `/attribute_value/{id}/`                    | Update details of a specific attribute value by ID      | Same as attribute value create                                                                | Admin     |
| Delete Attribute Value   | DELETE      | `/attribute_value/{id}/`                    | Remove the attribute value by ID                        |                                                                                               | Admin     |
| Get My Payment Methods   | GET         | `/payment_method/`                          | Get list of user payment methods                        |                                                                                               | User      |
| Create Payment Method    | POST        | `/payment_method/`                          | Create a new payment method                             | card_number                                                                                   | User      |
| Delete Payment Method    | DELETE      | `/payment_method/{id}/`                     | Remove the payment method by ID                         |                                                                                               | User      |
| Create Product Review    | POST        | `/product_review/`                          | Create a new product review                             | product_id, rating, comment                                                                   | User      |
| Update Product Review    | PUT         | `/product_review/{id}/`                     | Update details of a specific product review by ID       | Same as product review create                                                                 | User      |
| Delete Product Review    | DELETE      | `/product_review/{id}/`                     | Remove the product review by ID                         |                                                                                               | User      |
| Create Delivery Address  | POST        | `/shipping_address/`                        | Create a new delivery address                           | address, city, state, country, postal_code                                                    | User      |
| Update Delivery Address  | PUT         | `/shipping_address/{id}/`                   | Update details of a specific delivery address by ID     | Same as delivery address create                                                               | User      |
| Delete Delivery Address  | DELETE      | `/shipping_address/{id}/`                   | Remove the delivery address by ID                       |                                                                                               | User      |